<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FluxoX — Onboarding Técnico Interativo</title>
  <style>
    :root {
      --bg: #0a0f1a;
      --panel: #0f1626;
      --muted: #97a0b5;
      --fg: #efefef;
      --accent: #00a3ff;
      --accent-2: #41f0ff;
      --danger: #ff3b6b;
      --good: #2ae88a;
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --radius: 16px;
    }
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 1200px at 80% -20%, rgba(0,163,255,.15), transparent 60%),
                  radial-gradient(1000px 900px at -10% 110%, rgba(65,240,255,.12), transparent 50%),
                  var(--bg);
      color:var(--fg);
      font: 15px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, "Apple Color Emoji","Segoe UI Emoji";
      letter-spacing:.2px;
    }
    .app{max-width:1100px;margin:24px auto;padding:0 16px 80px}
    header{
      display:flex;align-items:center;gap:16px;margin:8px 0 18px
    }
    .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#0043ff);box-shadow:0 0 25px rgba(0,163,255,.5) inset, 0 0 40px rgba(0,163,255,.25);position:relative}
    .logo:after{content:"FX";position:absolute;inset:0;display:grid;place-items:center;font-weight:800;letter-spacing:1px;color:#031018;text-shadow:0 0 12px rgba(255,255,255,.35)}
    h1{font-size:22px;margin:0}
    .subtitle{color:var(--muted)}

    .toolbar{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
    .btn{background:linear-gradient(180deg, #0f1a2b, #0b1422);border:1px solid #1b2a45;color:var(--fg);padding:10px 14px;border-radius:12px;cursor:pointer;box-shadow:var(--shadow);transition:.2s transform,.2s box-shadow,.2s background}
    .btn:hover{transform:translateY(-1px);box-shadow:0 12px 36px rgba(0,0,0,.6)}
    .btn.primary{background:linear-gradient(180deg, #0c2b49, #07243f);border-color: #0b69a3}
    .btn.ghost{background:transparent;border:1px dashed #24334e;color:#bdc7dc}
    .btn.small{padding:6px 10px;font-size:13px;border-radius:10px}
    .switch{display:inline-flex;gap:8px;align-items:center;border:1px solid #22324f;border-radius:999px;padding:4px 8px;}
    .switch input{accent-color:var(--accent)}

    .stage{background:linear-gradient(180deg, #0c1424, #0a0f1a);border:1px solid #15213a;border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;display:grid;grid-template-columns: 1.1fr .9fr;gap:16px;min-height:380px}
    .screen{background:radial-gradient(500px 280px at 70% -20%, rgba(0,163,255,.09), transparent 50%), #0b1220; border:1px solid #15213a;border-radius:14px;padding:18px;position:relative;overflow:hidden}
    .screen h2{font-size:22px;margin:0 0 6px}
    .screen .kicker{color:var(--muted);font-size:13px;margin-bottom:10px}

    .screen .glow{color:var(--accent-2);text-shadow:0 0 16px rgba(0,163,255,.55)}
    .screen .neon{color:var(--accent);text-shadow:0 0 8px rgba(0,163,255,.8), 0 0 22px rgba(0,163,255,.3)}

    .badges{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0 14px}
    .badge{border:1px solid #1a2a45;background:linear-gradient(180deg,#0d1930,#0a1322);padding:6px 10px;border-radius:999px;font-size:12px;letter-spacing:.3px}

    .code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background: #0b1426;border:1px solid #16243f;padding:10px;border-radius:10px;font-size:13px;color:#dce8ff}
    .code .hl{background: rgba(0,163,255,.12);padding:0 4px;border-radius:6px;}

    .panel{background:linear-gradient(180deg,#0b1220,#09111c);border:1px solid #15213a;border-radius:var(--radius);padding:16px}
    .panel h3{margin:0 0 10px}

    /* Timeline */
    .timeline{display:grid;grid-template-columns: 1fr;gap:10px}
    .progress{height:10px;background:#0b1426;border:1px solid #15213a;border-radius:999px;position:relative;overflow:hidden}
    .progress .bar{position:absolute;inset:0 0 0 0;transform-origin:left center;transform:scaleX(0);background:linear-gradient(90deg,var(--accent), var(--accent-2));box-shadow:0 0 10px rgba(0,163,255,.6);}

    .segments{display:flex;flex-wrap:wrap;gap:8px}
    .seg{flex:1 1 auto; min-width: 120px; background:#0b1426;border:1px solid #1a2642;border-radius:10px;padding:8px 10px;font-size:12px;color:#cfe5ff;cursor:pointer;position:relative}
    .seg.active{outline:2px solid var(--accent);box-shadow:0 0 0 4px rgba(0,163,255,.08)}
    .seg small{display:block;color:#88a0c8;opacity:.9}

    .meta{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
    .meta .cell{background:#0b1426;border:1px solid #15213a;border-radius:10px;padding:8px 10px;font-size:12px;color:#c3d3f0}

    /* Overlays */
    .overlay-float{position:absolute; inset:auto 18px 18px auto; background:rgba(10,15,26,.7); border:1px solid rgba(65,240,255,.35); padding:10px 14px; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,.45);filter:drop-shadow(0 0 22px rgba(0,163,255,.2));backdrop-filter: blur(8px); opacity:0; transform:translateY(8px); transition:.25s}
    .overlay-float.show{opacity:1; transform:translateY(0)}

    .cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .cta{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(180deg,#012c43,#031e31); border:1px solid #0b69a3; color:#d6f3ff;padding:10px 14px;border-radius:12px;text-decoration:none}
    .cta.secondary{background:transparent;border-style:dashed;color:#b9d9ea}

    /* Animations */
    .fade-in{animation:fade .35s ease both}
    .slide-up{animation:slide-up .35s ease both}
    .pulse{animation:pulse 1.8s ease-in-out infinite}
    @keyframes fade{from{opacity:0}to{opacity:1}}
    @keyframes slide-up{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}
    @keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,163,255,.35)}50%{box-shadow:0 0 0 10px rgba(0,163,255,0)}}

    /* Footer */
    footer{margin-top:18px;color:#7e8ba5;font-size:12px}

    /* Responsive */
    @media (max-width: 960px){
      .stage{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>FluxoX — Integre em <span class="neon">minutos</span></h1>
        <div class="subtitle">Vídeos • Snippets • Low‑code · Sandbox seguro</div>
      </div>
    </header>

    <div class="toolbar" role="tablist" aria-label="Versões do roteiro">
      <button class="btn primary" role="tab" aria-selected="true" data-mode="60">Roteiro 60s</button>
      <button class="btn" role="tab" data-mode="30">Corte 30s</button>
      <button class="btn" role="tab" data-mode="15">Teaser 15s</button>
      <span class="switch" title="Ativar SFX nas transições">
        <input id="sfxToggle" type="checkbox" /> <label for="sfxToggle">SFX</label>
      </span>
      <span class="switch" title="Mostrar overlays na tela">
        <input id="overlayToggle" type="checkbox" checked/> <label for="overlayToggle">Overlays</label>
      </span>
      <div style="margin-left:auto;display:flex;gap:8px">
        <button class="btn small" id="ratio169">16:9</button>
        <button class="btn small" id="ratio916">9:16</button>
      </div>
    </div>

    <section class="stage" aria-live="polite">
      <div class="screen" id="screen">
        <div class="kicker">Onboarding técnico · FluxoX</div>
        <h2 id="screenTitle" class="glow">Aprenda em minutos</h2>
        <div id="screenBody" class="fade-in">Tela inicial — pressione <strong>Play</strong> para simular o roteiro.</div>

        <div class="badges" id="badgeRow">
          <span class="badge">Vídeos</span>
          <span class="badge">REST</span>
          <span class="badge">SDK</span>
          <span class="badge">Low‑code</span>
        </div>

        <pre class="code" id="codeBlock" aria-label="Exemplo de código" hidden>
<code>// Exemplo (REST)
POST /v1/fluxox/simulate
Authorization: Bearer <span class="hl">EIAH_TOKEN</span>
X-Project-Id: <span class="hl">projectId</span>
{
  "flow": "pilot",
  "mode": "sandbox"
}
</code>
        </pre>

        <div class="overlay-float" id="overlayFloat" role="note"></div>

        <div class="cta-row">
          <a class="cta" href="https://x.y/comece" target="_blank" rel="noopener">Comece agora</a>
          <a class="cta secondary" href="#" id="seeSnippets">Ver snippets REST/SDK</a>
          <a class="cta secondary" href="#" id="exploreTemplates">Explorar templates</a>
        </div>
      </div>

      <div class="panel">
        <h3 style="margin-top:0">Timeline</h3>
        <div class="timeline">
          <div class="progress" aria-label="Progresso">
            <div class="bar" id="progressBar"></div>
          </div>
          <div class="segments" id="segments"></div>
          <div class="meta">
            <div class="cell">Tempo: <span id="timeNow">00:00</span> / <span id="timeTotal">00:60</span></div>
            <div class="cell">Bloco: <span id="blockTitle">—</span></div>
          </div>
          <div class="toolbar">
            <button class="btn" id="playBtn">▶️ Play</button>
            <button class="btn" id="pauseBtn">⏸️ Pausar</button>
            <button class="btn" id="prevBtn">⏮️ Anterior</button>
            <button class="btn" id="nextBtn">⏭️ Próximo</button>
            <label class="btn ghost" style="cursor:default">Velocidade
              <select id="speedSel" style="margin-left:8px;background:transparent;border:0;color:#d6e7ff">
                <option value="1">1×</option>
                <option value="1.25">1.25×</option>
                <option value="1.5">1.5×</option>
                <option value="2">2×</option>
              </select>
            </label>
          </div>
        </div>

        <details style="margin-top:10px">
          <summary>Overlays disponíveis</summary>
          <div class="segments" style="margin-top:10px" id="overlayList"></div>
        </details>

        <details style="margin-top:10px">
          <summary>Lista de assets</summary>
          <ul style="margin-top:8px;color:#cbd9f3">
            <li>Gravações 1080p/60fps: abas <em>Vídeos, REST, SDK, Low‑code</em>, dashboard, simulação concluída.</li>
            <li>Ícones (SVG): Passos 1–4, Segurança (Escudo), Chave, Sandbox.</li>
            <li>Badges (SVG): REST, SDK, Low‑code, Node, Python, Java.</li>
            <li>Logo FluxoX (vetor), paleta, tipografia (sans para títulos; mono para código).</li>
          </ul>
        </details>
      </div>
    </section>

    <footer>
      Dica: acione <strong>SFX</strong> para ouvir transições e toque de sucesso na simulação. Este protótipo não usa mídia externa — os sons são gerados via WebAudio.
    </footer>
  </div>

  <script>
    // ====== Dados do roteiro ======
    const DATA = {
      overlays:[
        "Aprenda em minutos",
        "Vídeos • Snippets • Low-code",
        "Passo 1: Escolha o snippet",
        "Passo 2: Configure o token",
        "EIAH_TOKEN",
        "projectId",
        "Passo 3: Simule o fluxo",
        "Passo 4: Conecte o template",
        "–86% no tempo de integração",
        "Seguro e Isolado",
        "Stacks: Node, Python, Java",
        "Comece agora",
        "https://x.y/comece"
      ],
      v60:{
        total:60,
        segments:[
          {t:[0,5], title:"GANCHO", vo:"Integrar uma nova API não deveria levar semanas.", screen:"Tela escura; 'Semanas?' se dissipa; logo FluxoX em fade-in."},
          {t:[6,13], title:"PROMESSA + SOLUÇÃO", vo:"Com o onboarding técnico da FluxoX, você aprende em minutos.", screen:"Dashboard; título 'Aprenda em minutos' com highlight; badges de Vídeos/REST/SDK/Low‑code."},
          {t:[14,34], title:"COMO USAR (4 PASSOS)", vo:"Quatro passos: 1) Tour Rápido ou snippet da sua stack. 2) Configure EIAH_TOKEN e projectId. 3) Simule no sandbox. 4) Conecte um template low‑code.", screen:"Sequência: Vídeos (00:17 click) → REST (00:22 snippet com destaques neon) → Simulação (00:27 concluída) → Low‑code (00:32 conectar).", sfx:{clickAt:17, chimeAt:27}},
          {t:[35,41], title:"PROVA", vo:"Equipes reduzem o tempo de integração em até –86%.", screen:"Tipografia cinética gigante: –86%. Sub: 'no tempo de integração'."},
          {t:[42,50], title:"AMPLIAÇÃO (STACKS)", vo:"Use SDKs para Node, Python, Java, ou consuma via API REST.", screen:"Aba SDK; badges de linguagens aparecem conforme narradas."},
          {t:[51,55], title:"SEGURANÇA", vo:"Ambiente seguro, tokens por projeto e simulação isolada.", screen:"Ícones de Escudo, Chave e Sandbox."},
          {t:[56,60], title:"CTA", vo:"Pare de esperar. Comece agora.", screen:"Tela final com botão 'Comece agora' e URL curta."}
        ]
      },
      v30:{
        total:30,
        segments:[
          {t:[0,3], title:"GANCHO", vo:"Cansado de integrações lentas?", screen:"'Semanas?' vira 'Minutos!'."},
          {t:[4,8], title:"O QUE É", vo:"Onboarding FluxoX usa vídeos, snippets e low‑code para conectar seu fluxo.", screen:"Dashboard com badges animando."},
          {t:[9,20], title:"4 PASSOS (MONTAGEM)", vo:"1) Snippet 2) EIAH_TOKEN + projectId 3) Simule 4) Template low‑code.", screen:"Cortes rápidos com overlays Passo 1–4.", sfx:{chimeAt:16}},
          {t:[21,25], title:"PROVA", vo:"Reduza seu tempo em até –86%.", screen:"Tipografia grande: –86%."},
          {t:[26,30], title:"CTA", vo:"Teste no sandbox e comece agora.", screen:"Botão 'Comece agora' + URL."}
        ]
      },
      v15:{
        total:15,
        segments:[
          {t:[0,3], title:"HOOK", vo:"Integre a API da FluxoX em minutos, não em semanas.", screen:"Logo FluxoX; 'Integre em minutos'."},
          {t:[4,10], title:"BENEFÍCIO + SIMULAÇÃO", vo:"Copie um snippet, configure EIAH_TOKEN e rode uma simulação real agora.", screen:"Snippet copiado; EIAH_TOKEN em destaque; 'Simulação Concluída'.", sfx:{chimeAt:9}},
          {t:[11,15], title:"CTA", vo:"Comece agora e crie seu primeiro piloto.", screen:"CTA final + URL."}
        ]
      }
    };

    // ====== Estado ======
    let mode = '60'; // '60' | '30' | '15'
    let timer = null; let t = 0; let speed = 1;

    // ====== Util ======
    const el = sel => document.querySelector(sel);
    const pad = n => String(n).padStart(2,'0');
    const fmt = s => `${pad(Math.floor(s/60))}:${pad(Math.floor(s%60))}`;

    // ====== Áudio via WebAudio ======
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playClick(){
      if(!el('#sfxToggle').checked) return;
      const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type='square'; o.frequency.value=1100; g.gain.value=.08; o.connect(g); g.connect(audioCtx.destination);
      o.start(); setTimeout(()=>{o.stop();},70);
    }
    function playChime(){
      if(!el('#sfxToggle').checked) return;
      const notes=[523.25,659.25,783.99];
      notes.forEach((f,i)=>{
        const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
        o.type='sine'; o.frequency.value=f; g.gain.value=.06; g.gain.setTargetAtTime(0,audioCtx.currentTime+.35,.2);
        o.connect(g); g.connect(audioCtx.destination); o.start(audioCtx.currentTime + i*0.02); o.stop(audioCtx.currentTime + .6 + i*0.02);
      });
    }
    function playWhoosh(){
      if(!el('#sfxToggle').checked) return;
      const bufferSize = audioCtx.sampleRate * 0.25;
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for (let i=0;i<bufferSize;i++){data[i]=Math.random()*2-1;}
      const src = audioCtx.createBufferSource(); src.buffer = buffer;
      const filter = audioCtx.createBiquadFilter(); filter.type='lowpass'; filter.frequency.value=1200;
      const gain = audioCtx.createGain(); gain.gain.value=.18;
      src.connect(filter); filter.connect(gain); gain.connect(audioCtx.destination);
      src.start();
    }

    // ====== UI Build ======
    const segmentsEl = el('#segments');
    const timeNowEl = el('#timeNow');
    const timeTotalEl = el('#timeTotal');
    const progressBar = el('#progressBar');
    const blockTitleEl = el('#blockTitle');
    const screenTitle = el('#screenTitle');
    const screenBody = el('#screenBody');
    const codeBlock = el('#codeBlock');
    const overlayFloat = el('#overlayFloat');

    function currentData(){
      return mode==='60'?DATA.v60: mode==='30'?DATA.v30: DATA.v15;
    }

    function buildSegments(){
      segmentsEl.innerHTML='';
      const {segments, total} = currentData();
      timeTotalEl.textContent = fmt(total);
      segments.forEach((s, i)=>{
        const b=document.createElement('button'); b.className='seg'; b.innerHTML=`<strong>${s.title}</strong><small>${fmt(s.t[0])}–${fmt(s.t[1])}</small>`;
        b.addEventListener('click',()=>{t=s.t[0]; playWhoosh(); render();});
        segmentsEl.appendChild(b);
      });
    }

    function activeIndex(){
      const {segments}=currentData();
      return segments.findIndex(s=> t>=s.t[0] && t<=s.t[1]);
    }

    function setActiveSegClasses(){
      const idx = activeIndex();
      [...segmentsEl.children].forEach((c,i)=> c.classList.toggle('active', i===idx));
    }

    function showOverlay(text, ms=1500){
      if(!el('#overlayToggle').checked) return;
      overlayFloat.textContent = text; overlayFloat.classList.add('show');
      setTimeout(()=> overlayFloat.classList.remove('show'), ms);
    }

    function render(){
      const {segments, total} = currentData();
      const idx = activeIndex();
      const seg = segments[Math.max(0, idx)];
      timeNowEl.textContent = fmt(t);
      progressBar.style.transform = `scaleX(${Math.min(1, t/total)})`;
      blockTitleEl.textContent = seg? seg.title : '—';

      // Screen content
      if(seg){
        screenTitle.textContent = seg.title;
        screenBody.innerHTML = `<div class="slide-up"><div style="color:#9fb4d8">VO:</div> ${seg.vo}</div>
          <div class="fade-in" style="margin-top:8px;color:#cbd9f3"><div style="color:#9fb4d8">Tela:</div> ${seg.screen}</div>`;

        // Code visibility and overlays by heuristic
        if(/EIAH_TOKEN|projectId/.test(seg.vo) || /snippet|REST/.test(seg.screen)){
          codeBlock.hidden = false;
        } else {
          codeBlock.hidden = true;
        }

        // Event overlays & SFX cues
        if(mode==='60' && seg.title.startsWith('COMO USAR') && (t===17 || t===22 || t===27 || t===32)){
          if(t===17) { playClick(); showOverlay('Vídeos: Tour Rápido'); }
          if(t===22) { playClick(); showOverlay('REST: snippet com token'); }
          if(t===27) { playChime(); showOverlay('Simulação concluída ✅'); }
          if(t===32) { playWhoosh(); showOverlay('Low‑code conectado'); }
        }
        if(seg.sfx && seg.sfx.chimeAt && t===seg.sfx.chimeAt){ playChime(); showOverlay('Sucesso ✅'); }
      }

      setActiveSegClasses();
    }

    // ====== Transport ======
    function play(){ if(timer) return; timer = setInterval(()=>{ const {total}=currentData(); t += 1*speed; if(t>total){ pause(); t=total; } render(); }, 1000); }
    function pause(){ clearInterval(timer); timer=null; }
    function prev(){ const {segments}=currentData(); const idx=activeIndex(); if(idx>0){ t = segments[idx-1].t[0]; } render(); }
    function next(){ const {segments}=currentData(); const idx=activeIndex(); if(idx<segments.length-1){ t = segments[idx+1].t[0]; } render(); }

    // ====== Bindings ======
    document.querySelectorAll('[role="tab"]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('[role="tab"]').forEach(b=> b.classList.remove('primary'));
        btn.classList.add('primary');
        mode = btn.dataset.mode;
        pause(); t=0; buildSegments(); render(); playWhoosh();
      });
    });
    el('#playBtn').addEventListener('click', ()=>{audioCtx.resume(); play();});
    el('#pauseBtn').addEventListener('click', ()=> pause());
    el('#prevBtn').addEventListener('click', ()=> prev());
    el('#nextBtn').addEventListener('click', ()=> next());
    el('#speedSel').addEventListener('change', e=>{ speed = parseFloat(e.target.value); });

    el('#ratio169').addEventListener('click', ()=>{
      el('#screen').style.aspectRatio = '16 / 9'; el('#screen').style.minHeight='360px'; showOverlay('Aspecto 16:9');
    });
    el('#ratio916').addEventListener('click', ()=>{
      el('#screen').style.aspectRatio = '9 / 16'; el('#screen').style.minHeight='520px'; showOverlay('Aspecto 9:16');
    });

    // Overlays panel
    const overlayList = el('#overlayList');
    function buildOverlayList(){
      overlayList.innerHTML='';
      DATA.overlays.forEach(txt=>{
        const b=document.createElement('button'); b.className='seg'; b.textContent=txt; b.addEventListener('click',()=>{ showOverlay(txt, 1800); playWhoosh(); }); overlayList.appendChild(b);
      });
    }

    // Links (mock)
    el('#seeSnippets').addEventListener('click', (e)=>{ e.preventDefault(); showOverlay('Abrir: Snippets REST/SDK'); });
    el('#exploreTemplates').addEventListener('click', (e)=>{ e.preventDefault(); showOverlay('Abrir: Templates Low‑code'); });

    // Init
    buildSegments(); buildOverlayList(); render();
  </script>
</body>
</html>
